-- Tabela de Usuários
CREATE TABLE Usuario (
    id INT PRIMARY KEY AUTO_INCREMENT,
    nome VARCHAR(100) NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    senha VARCHAR(255) NOT NULL
);

-- Tabela de Grupos de Arquivos
CREATE TABLE GrupoArquivos (
    id INT PRIMARY KEY AUTO_INCREMENT,
    nome VARCHAR(100) NOT NULL,
    descricao TEXT
);

-- Tabela de Arquivos
CREATE TABLE Arquivos (
    id INT PRIMARY KEY AUTO_INCREMENT,
    nome VARCHAR(255) NOT NULL,
    caminho VARCHAR(500) NOT NULL,
    grupo_id INT,
    FOREIGN KEY (grupo_id) REFERENCES GrupoArquivos(id)
);

-- Tabela de Permissionamento
CREATE TABLE Permissionamento (
    id INT PRIMARY KEY AUTO_INCREMENT,
    usuario_id INT,
    arquivo_id INT,
    permissao ENUM('leitura', 'escrita', 'admin') NOT NULL,
    FOREIGN KEY (usuario_id) REFERENCES Usuario(id),
    FOREIGN KEY (arquivo_id) REFERENCES Arquivos(id),
    UNIQUE (usuario_id, arquivo_id)
);

-- Tabela de Relação entre Usuários e Grupos de Arquivos
CREATE TABLE UsuarioGrupo (
    usuario_id INT,
    grupo_id INT,
    PRIMARY KEY (usuario_id, grupo_id),
    FOREIGN KEY (usuario_id) REFERENCES Usuario(id),
    FOREIGN KEY (grupo_id) REFERENCES GrupoArquivos(id)
);
